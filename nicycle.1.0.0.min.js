/*!
 * nicycle Image Slideshow v1.0.0
 * http://www.nwhiting.com/
 *
 * Copyright 2010, Nickolas Whiting
 * Licensed under the Apache License, Version 2.0
 * http://www.apache.org/licenses/LICENSE-2.0.html
 *
 * Date: Wen Sep 22 2010
 */
(function($){$.nicycle=function(l){$.nicycle.config={slideshow:false,navigation:false,animSpeed:400,effect:'random',boxHeight:function(a){return a.height()},boxWidth:25,mousePause:true,cycle:true,cycTimeout:7500,zindex:5000,imagefail:function(a){a.remove()},generateBoxes:function(a,c,d,e,f){f.css('display','none');var g=new Array();for(var i=0;i!=a;i++){for(var b=0;b!=c+1;b++){var h=Math.round(i*d.height);var j=f.attr('src');var k=Math.round(b*d.width);g.push('<div class="nicycle-slide" style="position: absolute; top: '+h+'px; left: '+k+'px; height: '+d.height+'px; width: '+d.width+'px; background: url('+j+') no-repeat -'+k+'px -'+Math.round(h)+'px"></div>')}}e.append(g.join(''))}}$.nicycle.currentSlide=false;$.nicycle.ineffect=false;$.nicycle.effectCallback=false;$.nicycle.effectInternalCallback=false;$.nicycle.events={'internal':{'beforeeffect':function(){$.nicycle.ineffect=true},'aftereffect':function(){$.nicycle.ineffect=false;if(typeof $.nicycle.effectCallback=='function'){$.nicycle.effectCallback();$.nicycle.effectCallback=false}if(typeof $.nicycle.effectInteralCallback=='function'){$.nicycle.effectInteralCallback();$.nicycle.effectInteralCallback=false}}},'beforeLoad':false,'afterLoad':false,'navCallback':false}if(l)if(l['events']){eventSetting=l['events'];$.extend($.nicycle.events,eventSetting);delete(l['events'])}$.nicycle.config=$.extend($.nicycle.config,l);$.nicycle.effects={'downfadein':function(a,b){$.nicycle.events.internal.beforeeffect();timeBuff=50;b.css('display','none');b.css('z-index',parseFloat(a.css('z-index'))+1);itemHeight=b.attr('nicycle-block-height');slides=$('div.nicycle-slide',b);slides.each(function(){$(this).css({'opacity':0.0,'height':0});if(!itemHeight){itemHeight=$(this).attr('nicycle-block-height')}});b.css('display','block');slides.each(function(){var a=$(this);var b=itemHeight;setTimeout(function(){a.animate({opacity:1,height:b},$.nicycle.config.animSpeed)},(100+timeBuff));timeBuff+=50});$.nicycle.events.internal.aftereffect()},'crossfadein':function(a,b){$.nicycle.events.internal.beforeeffect();timeBuff=50;b.css('display','none');b.css('z-index',parseFloat(a.css('z-index'))+1);itemWidth=b.attr('nicycle-block-width');itemHeight=b.attr('nicycle-block-height');slides=$('div.nicycle-slide',b);slides.each(function(){$(this).css({'opacity':0.0,'width':0,'height':itemHeight})});b.css('display','block');slides.each(function(){var a=$(this);var b=itemWidth;setTimeout(function(){a.animate({opacity:1,width:b},$.nicycle.config.animSpeed)},(100+timeBuff));timeBuff+=50});$.nicycle.events.internal.aftereffect()},'fadeOut':function(a,b){$.nicycle.events.internal.beforeeffect();bzindex=parseFloat(a.css('z-index'))-1;b.css({'display':'block','opacity':1.0,'z-index':bzindex});itemWidth=b.attr('nicycle-block-width');itemHeight=b.attr('nicycle-block-height');slides=$('div.nicycle-slide',b);slides.each(function(){$(this).css({'opacity':1,'width':itemWidth,'height':itemHeight})});a.animate({opacity:0.0},$.nicycle.config.animSpeed,function(){a.css({'z-index':bzindex-2,'opacity':1.0})});$.nicycle.events.internal.aftereffect()},'fadeIn':function(a,b){$.nicycle.events.internal.beforeeffect();bzindex=parseFloat(a.css('z-index'))+1;b.css({'display':'block','opacity':0.0,'z-index':bzindex});itemWidth=b.attr('nicycle-block-width');itemHeight=b.attr('nicycle-block-height');slides=$('div',b);slides.each(function(){$(this).css({'opacity':1.0,'width':itemWidth,'height':itemHeight})});b.animate({opacity:1.0},$.nicycle.config.animSpeed);$.nicycle.events.internal.aftereffect()},'snakeMidFade':function(a,b){timeBuff=50;$.nicycle.events.internal.beforeeffect();bzindex=parseFloat(a.css('z-index'))+1;itemWidth=b.attr('nicycle-block-width');itemHeight=b.attr('nicycle-block-height');slides=$('div.nicycle-slide',b);slides.each(function(){$(this).css({width:itemWidth,height:itemHeight,opacity:0.0})})b.css({'display':'block','opacity':1.0,'z-index':bzindex});var c=new Array();slides.each(function(){c.push($(this))});secondLength=Math.round(c.length/2);var f=function(i,e,a){setTimeout(function(){console.log(e);c[i].animate({opacity:1.0},$.nicycle.config.animSpeed);c[e].animate({opacity:1.0},$.nicycle.config.animSpeed)},(100+a))}for(d=0;d!=secondLength+1;d++){f(d,(c.length-1)-d,timeBuff);timeBuff+=50}$.nicycle.events.internal.aftereffect()},'random':function(a,b){var c=new Array('downfadein','crossfadein','fadeOut','fadeIn','snakeMidFade');effect=Math.floor(Math.random()*c.length);$.nicycle.effects[c[effect]](a,b)}};$.nicycle.random=function(){var a="ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz";var b=8;var c='';for(var i=0;i<b;i++){var d=Math.round(Math.random()*a.length);c+=a.substring(d,d+1)}return c}$.nicycle.init=function(h){var j=new Array();$.nicycle.config.slideshow.each(function(){var a=$(this).find('img:first-child');if(!a){}else{var b=parseFloat(a.height());var c=parseFloat(a.width());if(b==0&&c==0){$.nicycle.config.imagefail($(this))}else{var d={height:parseFloat(typeof $.nicycle.config.boxHeight=='function'?$.nicycle.config.boxHeight(a):$.nicycle.config.boxHeight),width:parseFloat(typeof $.nicycle.config.boxWidth=='function'?$.nicycle.config.boxWidth(a):$.nicycle.config.boxWidth)}var e=Math.round(parseFloat(Math.round(c-d.width)/d.width));var f=Math.round(parseFloat(Math.round(b)/d.height));var g=$.nicycle.random();$(this).attr('nicycle',g);$(this).attr('ref',g);$(this).attr('nicycle-status','hidden');$(this).attr('nicycle-height',b);$(this).attr('nicycle-width',c);$(this).attr('nicycle-block-height',d.height);$(this).attr('nicycle-block-width',d.width);j.push(g);$.nicycle.config.generateBoxes(f,e,d,$(this),a);if($.nicycle.currentSlide==false){$.nicycle.currentSlide=$(this);$(this).css('z-index',$.nicycle.config.zindex);$(this).attr('nicycle-status','visible')}}}});var k=$.nicycle.config.navigation;if(k!=false&&typeof k=='object'){var i=0;k.each(function(){$(this).attr('nicycle-target',j[i]);$(this).click(function(){if($.nicycle.config.cycle){window.clearInterval($.nicycle.cycleInterval);$.nicycle.effectInteralCallback=function(){$.nicycle.cycle()}}id=$(this).attr('nicycle-target');if($.nicycle.currentSlide.attr('nicycle')==id)return false;slide=$('[ref='+id+']');$.nicycle.animate(slide);if(typeof $.nicycle.events.navCallback=='function'){$.nicycle.events.navCallback($(this),$.nicycle.config.navigation)}return false});i+=1})}if($.nicycle.config.mousePause){$.nicycle.config.slideshow.each(function(){$(this).hover(function(){$.nicycle.mousepause=true},function(){$.nicycle.mousepause=false})})}if($.nicycle.config.cycle){$.nicycle.cycle()}if(typeof $.nicycle.events.afterLoad=='function'){$.nicycle.events.afterLoad($.nicycle.config.slideshow,$.nicycle.config.navigation)}}$.nicycle.cycle=function(){$.nicycle.cycleInterval=window.setInterval(function(){if($.nicycle.mousepause)return false;var a=false;var b=false;var c=new Array();$.nicycle.config.slideshow.each(function(){c.push($(this))});for(i=0;i!=c.length;i++){if(c[i].attr('nicycle-status')=='hidden'){if(b){a=c[i];break}}else{b=true}}if(!a){a=c[0]}$.nicycle.animate(a)},$.nicycle.config.cycTimeout);return false}$.nicycle.animate=function(a){if(typeof a!='object'){a=$('[ref='+a+']',$.nicycle.config.slideshow)}$.nicycle.currentSlide.attr('nicycle-status','hidden');a.attr('nicycle-status','visible');if(typeof $.nicycle.config.effect=='function'){}if($.nicycle.ineffect){$.nicycle.effectCallback=function(){if(typeof $.nicycle.config.effect=='function'){$.nicycle.config.effect($.nicycle.currentSlide,a)}else{$.nicycle.effects[$.nicycle.config.effect]($.nicycle.currentSlide,a)}}return false}else{if(typeof $.nicycle.config.effect=='function'){$.nicycle.config.effect($.nicycle.currentSlide,a)}else{$.nicycle.effects[$.nicycle.config.effect]($.nicycle.currentSlide,a)}}$.nicycle.currentSlide=a;return false}if(typeof $.nicycle.events.beforeLoad=='function'){$.nicycle.events.beforeLoad($.nicycle.config.slideshow,$.nicycle.config.navigation)}if(document.readyState&&document.readyState!="complete"){var m=window.setInterval(function(){if(document.readyState=="complete"){$.nicycle.init();window.clearInterval(m)}},1000)}else{$.nicycle.init()}}})(jQuery);